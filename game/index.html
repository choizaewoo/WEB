<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>game</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/script.js"></script>
</head>

<body>

    <div class="container">
        <img id="mario" src="assets/mario.gif" alt="mario">
        <img id="goomba" src="assets/jibge.gif" alt="jibge">
    </div>




    <script>
        let isJumping = false;
        let isGameOver = false;

        function  marioDown() {
            if (isGameOver) {
                return;
            }

            let marioright = 250;

            let goombaleft =  Number(('#goomba').css('left').replace('px', ''));
            let goombaright = goombaleft + 200;

            if (goombaleft  <= marioright && isJumping == false) {
                console.log('die');
                $('#goomba').stop

            }
        }

        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function goombaStart() {

            let speed = getRandomInt(1000, 2000);
            let responTime = getRandomInt(1000, 2000);
            $('#goomba').animate({ left: '-120px' }, speed, function () {
                //왼쪽 끝까지 가면 초기 위치로 이동 
                $('#goomba').css('right', '-50px').css('left', '');
                //1초 후에 출발
                setTimeout(goombaStart, responTime);

            });
        }



        //연타방지
        function jump() {
            if (isJumping) {
                return;  // 점프중이면 또 뛰지마
            }

            isJumping = true;
            $('#mario').animate({ bottom: '+=200px' }, 'fast')
                .animate({ bottom: '-=200px' }, 'slow', function () {
                    isJumping = false;
                })
        }

        // onload
        $(function () {
            $('body').keydown(function (event) {
                switch (event.key) {
                    case ' ':
                        console.log('space');
                        break;
                }
            });
            //goomba출발 
            goombaStart();
            //충돌체크 
            setInterval(marioDown, 16.666);
        });
    </script>

</body>

</html>